---
title: 每天学点C++ (1)
date: 2024-03-18 16:26:17
categories: [Learning, 每天学点C++]
tags: [C++]
---

## 前言

说起鄙人主学 C++的原因，有很多，最主要的是因为，Rust 岗位少，风险大，于是选择了 C++ 作为主语言，不然毕业工作都找不到。(笑哭)

俗话说，没有 10 年，都不敢说自己会 C++。

于是出此系列，作为 C++ 学习笔记，每日一学，记录成长进度。

## C++11 新特性 (1)

### explicit 关键字

显式化构造函数

```c++
struct student a(18); // 显式
struct student b = 18; // 隐式
```

### 左值与右值

通俗来讲，以赋值号 = 为界，左值就是赋值号左边的值，右值就是赋值号右边的值。

左值就是有地址的值，右值就是没有地址的值。
一般左值存在内存中，右值存在寄存器中。

所有左值都可以转换成右值。

引用与静态变量的妙用：“右值”当左值用

```c++
int &demo()
{
    static int a=0;
    return a;
}

int main(void)
{
    demo() = 1;
}
```

### 函数返回值当引用

当函数返回值为引用时:

1. 若返回栈变量,不能成为其他引用初始值，不能当左值

2. 若返回静态变量或全局变量,可以作为其他引用初始值，可以当左值也可以当右值

### C++11 新增容器-array

#### 特点

- 新增序列容器，在普通数组上添加一些成员函数和全局函数
- 在初始化时固定大小
- 不支持动态增删
- 用作代替 C 语言中的数组，更加安全

#### 默认构造形式

```c++
array<T, int> arrayT;
array<int,5> a1;
```

#### 玩法

```c++
// 将所有元素批量赋值
array.assign()
array.fill()

array<int,5> a1,a2;
a1 = {1,2,3,4,5}; //  参数列表赋值
a2 = a1; // 拷贝赋值

a1.swap(a2); // 交换数组
array.size() == array.max_size(); // 数组大小

// 存取
a1[0];
a1.at(0);
a1.front();
a1.back();
```

### C++类型转换

旧式：

```c++
TYPE a= (TYPE) b;
```

新式：

```c++
TYPE a = 类型操作符<TYPE>(b);
类型操作符 = static_cast | reinterpret_cast | const_cast | dynamic_cast
```

#### static_cast

静态类型转换

适用于原本就可隐式转换的基本数据类型
上行转换 派生->基类
空指针转换成目标类型空指针
任何类型表达式转 void 类型

#### reinterpret_cast

如同旧式

TYPE 必须是一个指针、引用、算术类型、函数指针

#### const_cast

去掉 const 限定符

Tips:

```c++
char p[]="1234";
const char* p ="1234";
// 区别--头一个在栈上可修改，第二个在常量区，无法修改
```

![png](/images/每天学点C++/1.png)

#### dynamic_cast

基类指针/引用->派生指针/引用

注意：
下行转换只支持指针或引用转换
上行都可以（内存切割）
